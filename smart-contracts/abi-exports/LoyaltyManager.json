{
  "_format": "hh-sol-artifact-1",
  "contractName": "LoyaltyManager",
  "sourceName": "contracts/LoyaltyManager.sol",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_hvnaToken",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_nftContract",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "address",
          "name": "wallet",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "shopifyId",
          "type": "string"
        }
      ],
      "name": "CustomerLinked",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "discount",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "reason",
          "type": "string"
        }
      ],
      "name": "DiscountCalculated",
      "type": "event"
    },
    {
      "inputs": [],
      "name": "BRONZE_THRESHOLD",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "GOLD_THRESHOLD",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "PLATINUM_THRESHOLD",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "SILVER_THRESHOLD",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        }
      ],
      "name": "calculateDiscount",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "discount",
          "type": "uint256"
        },
        {
          "internalType": "string",
          "name": "reason",
          "type": "string"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "",
          "type": "string"
        }
      ],
      "name": "customerWallets",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint8",
          "name": "",
          "type": "uint8"
        }
      ],
      "name": "discountPercentages",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "shopifyCustomerId",
          "type": "string"
        }
      ],
      "name": "getDiscountByCustomer",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "discount",
          "type": "uint256"
        },
        {
          "internalType": "string",
          "name": "reason",
          "type": "string"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "hvnaToken",
      "outputs": [
        {
          "internalType": "contract IERC20",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "shopifyCustomerId",
          "type": "string"
        },
        {
          "internalType": "address",
          "name": "wallet",
          "type": "address"
        }
      ],
      "name": "linkCustomer",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "nftContract",
      "outputs": [
        {
          "internalType": "contract IERC721",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "nftTier",
      "outputs": [
        {
          "internalType": "uint8",
          "name": "",
          "type": "uint8"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "owner",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256[]",
          "name": "tokenIds",
          "type": "uint256[]"
        },
        {
          "internalType": "uint8[]",
          "name": "tiers",
          "type": "uint8[]"
        }
      ],
      "name": "setNFTTiers",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "shopifyCustomerIds",
      "outputs": [
        {
          "internalType": "string",
          "name": "",
          "type": "string"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint8",
          "name": "tier",
          "type": "uint8"
        },
        {
          "internalType": "uint256",
          "name": "percentage",
          "type": "uint256"
        }
      ],
      "name": "updateDiscountPercentage",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "tokenId",
          "type": "uint256"
        }
      ],
      "name": "verifyNFTOwnership",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        },
        {
          "internalType": "uint8",
          "name": "",
          "type": "uint8"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "bytecode": "0x6080346100be57610fc690601f38839003908101601f19168201906001600160401b038211838310176100c357808391604095869485528339810103126100be57818161005960206100526032956100d9565b92016100d9565b60018060a01b0360018060a01b0319918160009416838554161784551681600154161760015533906002541617600255808052600460205260058282205560018152600a828220556002815260198282205560038152205551610ed890816100ee8239f35b600080fd5b634e487b7160e01b600052604160045260246000fd5b51906001600160a01b03821682036100be5756fe6040608081526004908136101561001557600080fd5b600091823560e01c806305c845e714610893578063207fee5a146106b4578063378894a914610632578063521331991461060857806356973974146105e35780636826c4df146104fb57806369a2f026146104d75780636c6c6b3e146102c35780638da5cb5b1461029a5780638fdd80ca1461025c578063ad6a874514610219578063c1a0db30146101f4578063caaffae9146101cf578063d56d229d146101a6578063f25057f31461017a578063faab4ee71461010e5763fd08e6ab146100dc57600080fd5b3461010a57602036600319011261010a57602092829160ff6100fc610954565b168252845220549051908152f35b8280fd5b5091346101775760203660031901126101775782359067ffffffffffffffff8211610177575060209261014391369101610a02565b826101568351928381519384920161099e565b6006908201908152819003830190205490516001600160a01b039091168152f35b80fd5b5050346101a257816003193601126101a257905490516001600160a01b039091168152602090f35b5080fd5b5050346101a257816003193601126101a25760015490516001600160a01b039091168152602090f35b5050346101a257816003193601126101a2576020905169054b40b1f852bda000008152f35b5050346101a257816003193601126101a2576020905169010f0cf064dd592000008152f35b828434610177576020366003190112610177575061025861024061023b6108cd565b610ad5565b839291925193849384528060208501528301906109c1565b0390f35b5082346101775760203660031901126101775781359067ffffffffffffffff821161017757506102956102589261024092369101610a02565b610cc0565b5050346101a257816003193601126101a25760025490516001600160a01b039091168152602090f35b508290346101a257826003193601126101a25767ffffffffffffffff9281358481116104d3576102f69036908401610a02565b6024356001600160a01b0381811693918490036104cf5761031c90600254163314610a49565b828552602093600585528186209083519788116104bc575061033e8154610964565b601f8111610479575b508496601f81116001146103f35790816103e294939288997fa948e84cff3b091ef62f94a966b911145bee35dfeaafebc91825c1c62f3bb3cd99916103e8575b508160011b916000199060031b1c19161790555b8051858184516103ae818385890161099e565b81016006815203019020846bffffffffffffffffffffffff60a01b82541617905580805195869586528501528301906109c1565b0390a180f35b90508401518a610387565b818752858720601f198216885b8181106104625750916001917fa948e84cff3b091ef62f94a966b911145bee35dfeaafebc91825c1c62f3bb3cd999a826103e29897969510610449575b5050811b01905561039b565b86015160001960f88460031b161c191690558a8061043d565b868b01518355998801996001909201918801610400565b818752858720601f890160051c810191878a106104b2575b601f0160051c01905b8181106104a75750610347565b87815560010161049a565b9091508190610491565b634e487b7160e01b875260419052602486fd5b8580fd5b8380fd5b5050346101a257816003193601126101a25760209051683635c9adc5dea000008152f35b5050346101a2576020908160031936011261010a576001600160a01b036105206108cd565b1683526005825280832081519384918181549061053c82610964565b928386526001928884821691826000146105b957505060011461057b575b85886102588961056c848a038561091a565b519282849384528301906109c1565b87945081939291528383205b8284106105a1575050508201018161056c6102583861055a565b8054848a018601528895508794909301928101610587565b60ff19168882015294151560051b8701909401945085935061056c9250610258915038905061055a565b5050346101a257816003193601126101a2576020905169021e19e0c9bab24000008152f35b503461010a57602036600319011261010a578160209360ff92358152600385522054169051908152f35b50903461010a578060031936011261010a5761064c610954565b916024359261066660018060a01b03600254163314610a49565b6064841161067c5760ff16845260205282205580f35b506020606492519162461bcd60e51b83528201526012602482015271496e76616c69642070657263656e7461676560701b6044820152fd5b509190346101a257806003193601126101a25782359067ffffffffffffffff9283831161017757366023840112156101775782850135946106f48661093c565b936107018451958661091a565b8685526020908186016024809960051b830101913683116104cf5789849101915b8383106108835750505050863595861161010a573660238701121561010a57858201359561074f8761093c565b9661075c8651988961091a565b808852888389019160051b830101913683116104cf578901905b8282106108665750505061079560018060a01b03600254163314610a49565b845186510361082e57825b855181101561082a57600360ff81816107b9858c610aab565b5116116107f9579082916107d06107f4948b610aab565b5116906107dd838a610aab565b51875284528686209060ff19825416179055610a86565b6107a0565b865162461bcd60e51b8152808601859052600c818c01526b24b73b30b634b2103a34b2b960a11b6044820152606490fd5b8380f35b835162461bcd60e51b81529182015260158187015274082e4e4c2f240d8cadccee8d040dad2e6dac2e8c6d605b1b6044820152606490fd5b813560ff8116810361087f578152908301908301610776565b8680fd5b8235815291810191849101610722565b8284346101775781600319360112610177575060ff6108bc6108b36108cd565b60243590610d2c565b835191151582529091166020820152f35b600435906001600160a01b03821682036108e357565b600080fd5b6040810190811067ffffffffffffffff82111761090457604052565b634e487b7160e01b600052604160045260246000fd5b90601f8019910116810190811067ffffffffffffffff82111761090457604052565b67ffffffffffffffff81116109045760051b60200190565b6004359060ff821682036108e357565b90600182811c92168015610994575b602083101461097e57565b634e487b7160e01b600052602260045260246000fd5b91607f1691610973565b60005b8381106109b15750506000910152565b81810151838201526020016109a1565b906020916109da8151809281855285808601910161099e565b601f01601f1916010190565b67ffffffffffffffff811161090457601f01601f191660200190565b81601f820112156108e357803590610a19826109e6565b92610a27604051948561091a565b828452602083830101116108e357816000926020809301838601378301015290565b15610a5057565b60405162461bcd60e51b815260206004820152600e60248201526d139bdd08185d5d1a1bdc9a5e995960921b6044820152606490fd5b6000198114610a955760010190565b634e487b7160e01b600052601160045260246000fd5b8051821015610abf5760209160051b010190565b634e487b7160e01b600052603260045260246000fd5b600154604080516370a0823160e01b8082526001600160a01b0394851660048301819052929594936020939084908490602490829089165afa928315610cb557600093610c86575b506000948593610c70575b9060248592600054169389519485938492835260048301525afa908115610c6557600091610c38575b5060009069054b40b1f852bda000008110610bec57505060145b808410610bc25750610bbe91610bae95610b8960ff60299416610ddd565b9051968268027232a102a34b2b9160bd1b89948501528251928391868601910161099e565b810103600981018652018461091a565b9190565b945192506b2a37b5b2b7102437b63232b960a11b919050610be2836108e8565b600c835282015290565b69021e19e0c9bab24000008110610c07575050600f5b610b6b565b69010f0cf064dd592000008110610c21575050600a610b6b565b683635c9adc5dea0000011610c0257506005610b6b565b908382813d8311610c5e575b610c4e818361091a565b8101031261017757505138610b51565b503d610c44565b86513d6000823e3d90fd5b6003808752600486529588902054959350610b28565b90928482813d8311610cae575b610c9d818361091a565b810103126101775750519138610b1d565b503d610c93565b87513d6000823e3d90fd5b6020610cd5604051928381519384920161099e565b60069082019081528190036020019020546001600160a01b03168015610d0257610cfe90610ad5565b9091565b50600090604051610d12816108e8565b600a815269139bdd081b1a5b9ad95960b21b602082015290565b6001546040516331a9108f60e11b815260048101849052916001600160a01b03916020908490602490829086165afa60009381610d9f575b50610d755750505050600090600090565b8116911614610d875750600090600090565b600052600360205260ff604060002054169060019190565b6020949194813d8211610dd5575b81610dba6020938361091a565b810103126101a2575190838216820361017757509238610d64565b3d9150610dad565b8015610e8457600081805b610e705750610df6816109e6565b90610e04604051928361091a565b808252601f19610e13826109e6565b013660208401375b80928015610e69576000198201918211610a95578193600a926030908484068201809211610a955785511115610abf5760f81b6001600160f81b03191660001a908401601f01530491610e1b565b5050905090565b90610e7c600a91610a86565b910480610de8565b50604051610e91816108e8565b60018152600360fc1b60208201529056fea2646970667358221220d1f75a7b87ca7cfc07c808180657af3d973b4255bdcd7a339a8ff7ea991c170164736f6c63430008130033",
  "deployedBytecode": "0x6040608081526004908136101561001557600080fd5b600091823560e01c806305c845e714610893578063207fee5a146106b4578063378894a914610632578063521331991461060857806356973974146105e35780636826c4df146104fb57806369a2f026146104d75780636c6c6b3e146102c35780638da5cb5b1461029a5780638fdd80ca1461025c578063ad6a874514610219578063c1a0db30146101f4578063caaffae9146101cf578063d56d229d146101a6578063f25057f31461017a578063faab4ee71461010e5763fd08e6ab146100dc57600080fd5b3461010a57602036600319011261010a57602092829160ff6100fc610954565b168252845220549051908152f35b8280fd5b5091346101775760203660031901126101775782359067ffffffffffffffff8211610177575060209261014391369101610a02565b826101568351928381519384920161099e565b6006908201908152819003830190205490516001600160a01b039091168152f35b80fd5b5050346101a257816003193601126101a257905490516001600160a01b039091168152602090f35b5080fd5b5050346101a257816003193601126101a25760015490516001600160a01b039091168152602090f35b5050346101a257816003193601126101a2576020905169054b40b1f852bda000008152f35b5050346101a257816003193601126101a2576020905169010f0cf064dd592000008152f35b828434610177576020366003190112610177575061025861024061023b6108cd565b610ad5565b839291925193849384528060208501528301906109c1565b0390f35b5082346101775760203660031901126101775781359067ffffffffffffffff821161017757506102956102589261024092369101610a02565b610cc0565b5050346101a257816003193601126101a25760025490516001600160a01b039091168152602090f35b508290346101a257826003193601126101a25767ffffffffffffffff9281358481116104d3576102f69036908401610a02565b6024356001600160a01b0381811693918490036104cf5761031c90600254163314610a49565b828552602093600585528186209083519788116104bc575061033e8154610964565b601f8111610479575b508496601f81116001146103f35790816103e294939288997fa948e84cff3b091ef62f94a966b911145bee35dfeaafebc91825c1c62f3bb3cd99916103e8575b508160011b916000199060031b1c19161790555b8051858184516103ae818385890161099e565b81016006815203019020846bffffffffffffffffffffffff60a01b82541617905580805195869586528501528301906109c1565b0390a180f35b90508401518a610387565b818752858720601f198216885b8181106104625750916001917fa948e84cff3b091ef62f94a966b911145bee35dfeaafebc91825c1c62f3bb3cd999a826103e29897969510610449575b5050811b01905561039b565b86015160001960f88460031b161c191690558a8061043d565b868b01518355998801996001909201918801610400565b818752858720601f890160051c810191878a106104b2575b601f0160051c01905b8181106104a75750610347565b87815560010161049a565b9091508190610491565b634e487b7160e01b875260419052602486fd5b8580fd5b8380fd5b5050346101a257816003193601126101a25760209051683635c9adc5dea000008152f35b5050346101a2576020908160031936011261010a576001600160a01b036105206108cd565b1683526005825280832081519384918181549061053c82610964565b928386526001928884821691826000146105b957505060011461057b575b85886102588961056c848a038561091a565b519282849384528301906109c1565b87945081939291528383205b8284106105a1575050508201018161056c6102583861055a565b8054848a018601528895508794909301928101610587565b60ff19168882015294151560051b8701909401945085935061056c9250610258915038905061055a565b5050346101a257816003193601126101a2576020905169021e19e0c9bab24000008152f35b503461010a57602036600319011261010a578160209360ff92358152600385522054169051908152f35b50903461010a578060031936011261010a5761064c610954565b916024359261066660018060a01b03600254163314610a49565b6064841161067c5760ff16845260205282205580f35b506020606492519162461bcd60e51b83528201526012602482015271496e76616c69642070657263656e7461676560701b6044820152fd5b509190346101a257806003193601126101a25782359067ffffffffffffffff9283831161017757366023840112156101775782850135946106f48661093c565b936107018451958661091a565b8685526020908186016024809960051b830101913683116104cf5789849101915b8383106108835750505050863595861161010a573660238701121561010a57858201359561074f8761093c565b9661075c8651988961091a565b808852888389019160051b830101913683116104cf578901905b8282106108665750505061079560018060a01b03600254163314610a49565b845186510361082e57825b855181101561082a57600360ff81816107b9858c610aab565b5116116107f9579082916107d06107f4948b610aab565b5116906107dd838a610aab565b51875284528686209060ff19825416179055610a86565b6107a0565b865162461bcd60e51b8152808601859052600c818c01526b24b73b30b634b2103a34b2b960a11b6044820152606490fd5b8380f35b835162461bcd60e51b81529182015260158187015274082e4e4c2f240d8cadccee8d040dad2e6dac2e8c6d605b1b6044820152606490fd5b813560ff8116810361087f578152908301908301610776565b8680fd5b8235815291810191849101610722565b8284346101775781600319360112610177575060ff6108bc6108b36108cd565b60243590610d2c565b835191151582529091166020820152f35b600435906001600160a01b03821682036108e357565b600080fd5b6040810190811067ffffffffffffffff82111761090457604052565b634e487b7160e01b600052604160045260246000fd5b90601f8019910116810190811067ffffffffffffffff82111761090457604052565b67ffffffffffffffff81116109045760051b60200190565b6004359060ff821682036108e357565b90600182811c92168015610994575b602083101461097e57565b634e487b7160e01b600052602260045260246000fd5b91607f1691610973565b60005b8381106109b15750506000910152565b81810151838201526020016109a1565b906020916109da8151809281855285808601910161099e565b601f01601f1916010190565b67ffffffffffffffff811161090457601f01601f191660200190565b81601f820112156108e357803590610a19826109e6565b92610a27604051948561091a565b828452602083830101116108e357816000926020809301838601378301015290565b15610a5057565b60405162461bcd60e51b815260206004820152600e60248201526d139bdd08185d5d1a1bdc9a5e995960921b6044820152606490fd5b6000198114610a955760010190565b634e487b7160e01b600052601160045260246000fd5b8051821015610abf5760209160051b010190565b634e487b7160e01b600052603260045260246000fd5b600154604080516370a0823160e01b8082526001600160a01b0394851660048301819052929594936020939084908490602490829089165afa928315610cb557600093610c86575b506000948593610c70575b9060248592600054169389519485938492835260048301525afa908115610c6557600091610c38575b5060009069054b40b1f852bda000008110610bec57505060145b808410610bc25750610bbe91610bae95610b8960ff60299416610ddd565b9051968268027232a102a34b2b9160bd1b89948501528251928391868601910161099e565b810103600981018652018461091a565b9190565b945192506b2a37b5b2b7102437b63232b960a11b919050610be2836108e8565b600c835282015290565b69021e19e0c9bab24000008110610c07575050600f5b610b6b565b69010f0cf064dd592000008110610c21575050600a610b6b565b683635c9adc5dea0000011610c0257506005610b6b565b908382813d8311610c5e575b610c4e818361091a565b8101031261017757505138610b51565b503d610c44565b86513d6000823e3d90fd5b6003808752600486529588902054959350610b28565b90928482813d8311610cae575b610c9d818361091a565b810103126101775750519138610b1d565b503d610c93565b87513d6000823e3d90fd5b6020610cd5604051928381519384920161099e565b60069082019081528190036020019020546001600160a01b03168015610d0257610cfe90610ad5565b9091565b50600090604051610d12816108e8565b600a815269139bdd081b1a5b9ad95960b21b602082015290565b6001546040516331a9108f60e11b815260048101849052916001600160a01b03916020908490602490829086165afa60009381610d9f575b50610d755750505050600090600090565b8116911614610d875750600090600090565b600052600360205260ff604060002054169060019190565b6020949194813d8211610dd5575b81610dba6020938361091a565b810103126101a2575190838216820361017757509238610d64565b3d9150610dad565b8015610e8457600081805b610e705750610df6816109e6565b90610e04604051928361091a565b808252601f19610e13826109e6565b013660208401375b80928015610e69576000198201918211610a95578193600a926030908484068201809211610a955785511115610abf5760f81b6001600160f81b03191660001a908401601f01530491610e1b565b5050905090565b90610e7c600a91610a86565b910480610de8565b50604051610e91816108e8565b60018152600360fc1b60208201529056fea2646970667358221220d1f75a7b87ca7cfc07c808180657af3d973b4255bdcd7a339a8ff7ea991c170164736f6c63430008130033",
  "linkReferences": {},
  "deployedLinkReferences": {}
}
