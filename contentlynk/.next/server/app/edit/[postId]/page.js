(()=>{var e={};e.id=402,e.ids=[402],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19225:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>d}),s(15497),s(32039),s(35866);var r=s(23191),a=s(88716),n=s(37922),i=s.n(n),o=s(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d=["",{children:["edit",{children:["[postId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,15497)),"/Users/davidsime/hvna-ecosystem/contentlynk/src/app/edit/[postId]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,32039)),"/Users/davidsime/hvna-ecosystem/contentlynk/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/davidsime/hvna-ecosystem/contentlynk/src/app/edit/[postId]/page.tsx"],m="/edit/[postId]/page",u={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/edit/[postId]/page",pathname:"/edit/[postId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},22166:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,12994,23)),Promise.resolve().then(s.t.bind(s,96114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,79671,23)),Promise.resolve().then(s.t.bind(s,41868,23)),Promise.resolve().then(s.t.bind(s,84759,23))},98432:(e,t,s)=>{Promise.resolve().then(s.bind(s,30196))},96883:(e,t,s)=>{Promise.resolve().then(s.bind(s,28145))},35047:(e,t,s)=>{"use strict";var r=s(77389);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},28145:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s(10326),a=s(17577),n=s(77109),i=s(35047),o=s(47375),l=s(99837);function d(){let{data:e,status:t}=(0,n.useSession)(),s=(0,i.useRouter)(),d=(0,i.useParams)().postId,[c,m]=(0,a.useState)(null),[u,x]=(0,a.useState)(""),[p,g]=(0,a.useState)(""),[h,f]=(0,a.useState)(!1),[y,v]=(0,a.useState)(!0),[b,j]=(0,a.useState)(null),[N,w]=(0,a.useState)(null),[P,k]=(0,a.useState)(!1),C=e=>{let t=e.target.files?.[0];if(!t)return;if(!["image/jpeg","image/png","image/gif","image/webp"].includes(t.type)){alert("Invalid file type. Please select a JPG, PNG, GIF, or WebP image.");return}if(t.size>5242880){alert("File too large. Please select an image under 5MB.");return}j(t);let s=new FileReader;s.onload=e=>{w(e.target?.result)},s.readAsDataURL(t)},S=async e=>{e.preventDefault(),f(!0);try{let e=N;if(b){k(!0);let t=new FormData;t.append("file",b);let s=await fetch("/api/upload",{method:"POST",body:t});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to upload image")}let{url:r}=await s.json();e=r,k(!1)}let t=await fetch("/api/posts",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:d,title:u.trim()||null,content:p.trim(),imageUrl:e})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to update post")}alert("Post updated successfully!"),s.push("/dashboard")}catch(e){console.error("Error updating post:",e),alert(e instanceof Error?e.message:"Failed to update post. Please try again.")}finally{f(!1),k(!1)}};return"loading"===t||y?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-indigo-600"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading post..."})]})}):e&&c?(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[r.jsx("header",{className:"bg-white shadow-sm border-b",children:r.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Post"}),r.jsx("p",{className:"text-gray-600",children:"Update your content and continue earning"})]}),r.jsx(l.z,{variant:"outline",onClick:()=>s.push("/dashboard"),children:"Back to Dashboard"})]})})}),r.jsx("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)(o.Zb,{children:[(0,r.jsxs)(o.Ol,{children:[r.jsx(o.ll,{children:"Edit Your Post"}),r.jsx(o.SZ,{children:"Make changes to your content"})]}),r.jsx(o.aY,{children:(0,r.jsxs)("form",{onSubmit:S,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Post Title (Optional)"}),r.jsx("input",{id:"title",type:"text",value:u,onChange:e=>x(e.target.value),placeholder:"Give your post a catchy title...",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",maxLength:100}),r.jsx("div",{className:"flex justify-between items-center mt-1",children:(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[u.length,"/100 characters"]})})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),r.jsx("textarea",{id:"content",value:p,onChange:e=>g(e.target.value),placeholder:"Share your thoughts, ideas, or stories...",rows:8,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 resize-none",maxLength:1e3}),r.jsx("div",{className:"flex justify-between items-center mt-2",children:(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[p.length,"/1000 characters"]})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Update Image (Optional)"}),N?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"relative",children:[r.jsx("img",{src:N,alt:"Preview",className:"max-w-full max-h-64 rounded-lg shadow-md mx-auto"}),r.jsx("button",{type:"button",onClick:()=>{j(null),w(null)},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),b&&(0,r.jsxs)("p",{className:"text-sm text-gray-600 text-center",children:["New image: ",b.name," (",(b.size/1024/1024).toFixed(1),"MB)"]}),r.jsx("div",{className:"text-center",children:(0,r.jsxs)("label",{className:"cursor-pointer text-sm text-indigo-600 hover:text-indigo-500",children:["Change image",r.jsx("input",{type:"file",className:"hidden",accept:"image/jpeg,image/png,image/gif,image/webp",onChange:C})]})})]}):(0,r.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:r.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("label",{className:"cursor-pointer",children:[r.jsx("span",{className:"text-sm font-medium text-indigo-600 hover:text-indigo-500",children:"Click to upload new image"}),r.jsx("input",{type:"file",className:"hidden",accept:"image/jpeg,image/png,image/gif,image/webp",onChange:C})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, GIF, WebP up to 5MB"})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4",children:[r.jsx(l.z,{type:"button",variant:"outline",onClick:()=>s.push("/dashboard"),children:"Cancel"}),r.jsx(l.z,{type:"submit",disabled:!p.trim()||h||P,className:"bg-indigo-600 hover:bg-indigo-700",children:P?"Uploading Image...":h?"Updating...":"Update Post"})]})]})})]})})]}):null}},30196:(e,t,s)=>{"use strict";s.d(t,{ClientProviders:()=>i});var r=s(10326),a=s(77109),n=s(40381);function i({children:e}){return(0,r.jsxs)(a.SessionProvider,{children:[r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100",children:e}),r.jsx(n.x7,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,style:{background:"#10b981"}},error:{duration:5e3,style:{background:"#ef4444"}}}})]})}},99837:(e,t,s)=>{"use strict";s.d(t,{z:()=>o});var r=s(10326),a=s(17577),n=s.n(a),i=s(51223);let o=n().forwardRef(({className:e,variant:t="primary",size:s="md",children:a,...n},o)=>r.jsx("button",{className:(0,i.cn)("inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",{primary:"bg-indigo-600 text-white hover:bg-indigo-700 active:bg-indigo-800",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 active:bg-gray-300",outline:"border border-gray-300 bg-transparent text-gray-700 hover:bg-gray-50 active:bg-gray-100",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 active:bg-gray-200"}[t],{sm:"h-8 px-3 text-sm",md:"h-10 px-4 text-base",lg:"h-12 px-6 text-lg"}[s],e),ref:o,...n,children:a}));o.displayName="Button"},47375:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>l,SZ:()=>c,Zb:()=>o,aY:()=>m,ll:()=>d});var r=s(10326),a=s(17577),n=s.n(a),i=s(51223);let o=n().forwardRef(({className:e,children:t,...s},a)=>r.jsx("div",{ref:a,className:(0,i.cn)("rounded-lg border bg-white text-gray-950 shadow-sm",e),...s,children:t}));o.displayName="Card";let l=n().forwardRef(({className:e,children:t,...s},a)=>r.jsx("div",{ref:a,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...s,children:t}));l.displayName="CardHeader";let d=n().forwardRef(({className:e,children:t,...s},a)=>r.jsx("h3",{ref:a,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s,children:t}));d.displayName="CardTitle";let c=n().forwardRef(({className:e,children:t,...s},a)=>r.jsx("p",{ref:a,className:(0,i.cn)("text-sm text-gray-500",e),...s,children:t}));c.displayName="CardDescription";let m=n().forwardRef(({className:e,children:t,...s},a)=>r.jsx("div",{ref:a,className:(0,i.cn)("p-6 pt-0",e),...s,children:t}));m.displayName="CardContent",n().forwardRef(({className:e,children:t,...s},a)=>r.jsx("div",{ref:a,className:(0,i.cn)("flex items-center p-6 pt-0",e),...s,children:t})).displayName="CardFooter"},51223:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var r=s(41135),a=s(31009);function n(...e){return(0,a.m6)((0,r.W)(e))}},15497:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>o});var r=s(68570);let a=(0,r.createProxy)(String.raw`/Users/davidsime/hvna-ecosystem/contentlynk/src/app/edit/[postId]/page.tsx`),{__esModule:n,$$typeof:i}=a;a.default;let o=(0,r.createProxy)(String.raw`/Users/davidsime/hvna-ecosystem/contentlynk/src/app/edit/[postId]/page.tsx#default`)},32039:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u,metadata:()=>m});var r=s(19510),a=s(45317),n=s.n(a),i=s(68570);let o=(0,i.createProxy)(String.raw`/Users/davidsime/hvna-ecosystem/contentlynk/src/components/providers/ClientProviders.tsx`),{__esModule:l,$$typeof:d}=o;o.default;let c=(0,i.createProxy)(String.raw`/Users/davidsime/hvna-ecosystem/contentlynk/src/components/providers/ClientProviders.tsx#ClientProviders`);s(5023);let m={title:"Contentlynk - Creator Economy Reimagined",description:"The first social platform that pays creators from day one. Zero follower minimums, transparent earnings, powered by $HVNA."};function u({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:n().className,children:r.jsx(c,{children:e})})})}},5023:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,300,325],()=>s(19225));module.exports=r})();