(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{2907:function(e,s,r){Promise.resolve().then(r.bind(r,4443))},6463:function(e,s,r){"use strict";var t=r(1169);r.o(t,"useParams")&&r.d(s,{useParams:function(){return t.useParams}}),r.o(t,"useRouter")&&r.d(s,{useRouter:function(){return t.useRouter}})},4443:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return f}});var t,i,n,l,a=r(7437),c=r(2265),d=r(998),o=r(6463),x=r(4608),u=r(6760),m=r(9354);let h=c.forwardRef((e,s)=>{let{className:r,variant:t="default",children:i,...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,m.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}[t],r),...n,children:i})});h.displayName="Badge";let g={STANDARD:.55,SILVER:.6,GOLD:.65,PLATINUM:.7,GENESIS:.75};function f(){var e,s,r;let{data:t,status:i}=(0,d.useSession)(),l=(0,o.useRouter)(),[m,f]=(0,c.useState)(n.STANDARD),[j,N]=(0,c.useState)([]),[p,b]=(0,c.useState)(!0),[v,y]=(0,c.useState)(null),w=async()=>{var e;if(null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.id)try{b(!0);let e=await fetch("/api/posts?userId=".concat(t.user.id,"&limit=5"));if(e.ok){let{posts:s}=await e.json(),r=s.map(e=>({...e,earnings:function(e,s){let r=function(e){let s=.001*e.views,r=.01*e.likes,t=.05*e.comments;return s+r+t+.1*e.shares}(e),t=g[s],i={views:.001*e.views*t,likes:.01*e.likes*t,comments:.05*e.comments*t,shares:.1*e.shares*t};return{baseEarnings:r,tierMultiplier:t,finalEarnings:r*t,breakdown:i}}({views:e.views,likes:e.likes,comments:e.comments,shares:e.shares},m).finalEarnings}));N(r)}}catch(e){console.error("Error fetching posts:",e)}finally{b(!1)}};(0,c.useEffect)(()=>{"unauthenticated"===i&&l.push("/auth/signin")},[i,l]),(0,c.useEffect)(()=>{var e;(null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.id)&&w()},[null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.id,m]);let E=async(e,s)=>{if(confirm('Are you sure you want to delete the post "'.concat(s||"Untitled Post",'"? This action cannot be undone.')))try{y(e);let s=await fetch("/api/posts?postId=".concat(e),{method:"DELETE"});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to delete post")}N(j.filter(s=>s.id!==e)),alert("Post deleted successfully!")}catch(e){console.error("Error deleting post:",e),alert(e instanceof Error?e.message:"Failed to delete post. Please try again.")}finally{y(null)}},S=e=>{l.push("/edit/".concat(e))},k={posts:j.length,views:j.reduce((e,s)=>e+s.views,0),likes:j.reduce((e,s)=>e+s.likes,0),followers:0};return"loading"===i?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-indigo-600"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading your dashboard..."})]})}):t?(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome back, ",(null===(s=t.user)||void 0===s?void 0:s.displayName)||(null===(r=t.user)||void 0===r?void 0:r.username),"!"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Here's your creator dashboard"}),m&&(0,a.jsxs)(h,{className:m===n.GENESIS?"bg-indigo-100 text-indigo-800 border-indigo-300":m===n.PLATINUM?"bg-purple-100 text-purple-800 border-purple-300":m===n.GOLD?"bg-yellow-100 text-yellow-800 border-yellow-300":m===n.SILVER?"bg-gray-100 text-gray-800 border-gray-300":"bg-blue-100 text-blue-800 border-blue-300",children:[(e=>{switch(e){case n.GENESIS:return"\uD83D\uDC51";case n.PLATINUM:return"\uD83D\uDC8E";case n.GOLD:return"\uD83C\uDFC6";case n.SILVER:return"\uD83E\uDD48";default:return"â­"}})(m)," ",m]})]})]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(u.z,{onClick:()=>l.push("/create"),className:"bg-indigo-600 hover:bg-indigo-700",children:"Create Post"}),(0,a.jsx)(u.z,{variant:"outline",onClick:()=>(0,d.signOut)({callbackUrl:"/"}),children:"Sign Out"})]})]})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8",children:[(0,a.jsx)(x.Zb,{className:"border-indigo-200 bg-indigo-50",children:(0,a.jsx)(x.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-indigo-900",children:"\uD83D\uDE80 Unlock Higher Earnings with Web3"}),(0,a.jsx)("p",{className:"text-indigo-700 mt-1",children:"Connect your wallet to verify NFT holdings and unlock revenue shares up to 75%"})]}),(0,a.jsx)(u.z,{onClick:()=>{},className:"bg-indigo-600 hover:bg-indigo-700",children:"Connect Wallet"})]})})}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Performance"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)(x.Zb,{children:[(0,a.jsxs)(x.Ol,{className:"pb-2",children:[(0,a.jsx)(x.SZ,{children:"Total Posts"}),(0,a.jsx)(x.ll,{className:"text-3xl",children:k.posts})]}),(0,a.jsx)(x.aY,{children:(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Published content"})})]}),(0,a.jsxs)(x.Zb,{children:[(0,a.jsxs)(x.Ol,{className:"pb-2",children:[(0,a.jsx)(x.SZ,{children:"Total Views"}),(0,a.jsx)(x.ll,{className:"text-3xl",children:k.views.toLocaleString()})]}),(0,a.jsx)(x.aY,{children:(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Across all posts"})})]}),(0,a.jsxs)(x.Zb,{children:[(0,a.jsxs)(x.Ol,{className:"pb-2",children:[(0,a.jsx)(x.SZ,{children:"Total Likes"}),(0,a.jsx)(x.ll,{className:"text-3xl",children:k.likes})]}),(0,a.jsx)(x.aY,{children:(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Engagement count"})})]}),(0,a.jsxs)(x.Zb,{children:[(0,a.jsxs)(x.Ol,{className:"pb-2",children:[(0,a.jsx)(x.SZ,{children:"Followers"}),(0,a.jsx)(x.ll,{className:"text-3xl",children:k.followers})]}),(0,a.jsx)(x.aY,{children:(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Feature coming soon"})})]})]})]}),(0,a.jsxs)(x.Zb,{children:[(0,a.jsxs)(x.Ol,{children:[(0,a.jsx)(x.ll,{children:"Recent Posts Performance"}),(0,a.jsx)(x.SZ,{children:"See how your content is performing"})]}),(0,a.jsx)(x.aY,{children:p?(0,a.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"}),(0,a.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading posts..."})]}):0===j.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"No posts yet"}),(0,a.jsx)(u.z,{onClick:()=>l.push("/create"),className:"bg-indigo-600 hover:bg-indigo-700",children:"Create Your First Post"})]}):(0,a.jsx)("div",{className:"space-y-4",children:j.map(e=>(0,a.jsx)("div",{className:"p-4 border rounded-lg hover:bg-gray-50",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 mr-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.title||"Untitled Post"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:e.content})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,a.jsxs)(u.z,{size:"sm",variant:"outline",onClick:()=>S(e.id),className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),(0,a.jsxs)(u.z,{size:"sm",variant:"outline",onClick:()=>E(e.id,e.title||"Untitled"),disabled:v===e.id,className:"text-red-600 border-red-200 hover:bg-red-50",children:[v===e.id?(0,a.jsx)("div",{className:"w-4 h-4 mr-1 animate-spin rounded-full border-2 border-red-600 border-t-transparent"}):(0,a.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]}),e.imageUrl&&(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)("img",{src:e.imageUrl,alt:"Post image",className:"max-w-xs rounded-lg shadow-sm"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mt-3 text-sm text-gray-600",children:[(0,a.jsxs)("span",{children:[e.views," views"]}),(0,a.jsxs)("span",{children:[e.likes," likes"]}),(0,a.jsxs)("span",{children:[e.comments," comments"]}),(0,a.jsxs)("span",{children:[e.shares," shares"]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"font-semibold text-green-600",children:function(e){let s=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=e.toLocaleString("en-US",{minimumFractionDigits:3,maximumFractionDigits:3});return s?"".concat(r," HVNA"):r}(e.earnings)}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()})]})]})},e.id))})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)(x.Zb,{children:[(0,a.jsxs)(x.Ol,{children:[(0,a.jsx)(x.ll,{children:"Create Content"}),(0,a.jsx)(x.SZ,{children:"Share your thoughts and start earning"})]}),(0,a.jsx)(x.aY,{children:(0,a.jsx)(u.z,{className:"w-full",onClick:()=>l.push("/create"),children:"Create Post"})})]}),(0,a.jsxs)(x.Zb,{children:[(0,a.jsxs)(x.Ol,{children:[(0,a.jsx)(x.ll,{children:"View Feed"}),(0,a.jsx)(x.SZ,{children:"See what other creators are sharing"})]}),(0,a.jsx)(x.aY,{children:(0,a.jsx)(u.z,{variant:"outline",className:"w-full",onClick:()=>l.push("/feed"),children:"Browse Feed"})})]}),(0,a.jsxs)(x.Zb,{children:[(0,a.jsxs)(x.Ol,{children:[(0,a.jsx)(x.ll,{children:"Analytics"}),(0,a.jsx)(x.SZ,{children:"Deep dive into your performance metrics"})]}),(0,a.jsx)(x.aY,{children:(0,a.jsx)(u.z,{variant:"outline",className:"w-full",onClick:()=>l.push("/analytics"),children:"View Analytics"})})]})]})]})]}):null}(t=n||(n={})).STANDARD="STANDARD",t.SILVER="SILVER",t.GOLD="GOLD",t.PLATINUM="PLATINUM",t.GENESIS="GENESIS",(i=l||(l={})).AD_REVENUE="AD_REVENUE",i.TIPS="TIPS",i.NFT_SALES="NFT_SALES",i.BRAND_PARTNERSHIP="BRAND_PARTNERSHIP",i.CONTENT_VIEWS="CONTENT_VIEWS",i.ENGAGEMENT_BONUS="ENGAGEMENT_BONUS"},6760:function(e,s,r){"use strict";r.d(s,{z:function(){return l}});var t=r(7437),i=r(2265),n=r(9354);let l=i.forwardRef((e,s)=>{let{className:r,variant:i="primary",size:l="md",children:a,...c}=e;return(0,t.jsx)("button",{className:(0,n.cn)("inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",{primary:"bg-indigo-600 text-white hover:bg-indigo-700 active:bg-indigo-800",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 active:bg-gray-300",outline:"border border-gray-300 bg-transparent text-gray-700 hover:bg-gray-50 active:bg-gray-100",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 active:bg-gray-200"}[i],{sm:"h-8 px-3 text-sm",md:"h-10 px-4 text-base",lg:"h-12 px-6 text-lg"}[l],r),ref:s,...c,children:a})});l.displayName="Button"},4608:function(e,s,r){"use strict";r.d(s,{Ol:function(){return a},SZ:function(){return d},Zb:function(){return l},aY:function(){return o},ll:function(){return c}});var t=r(7437),i=r(2265),n=r(9354);let l=i.forwardRef((e,s)=>{let{className:r,children:i,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-white text-gray-950 shadow-sm",r),...l,children:i})});l.displayName="Card";let a=i.forwardRef((e,s)=>{let{className:r,children:i,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...l,children:i})});a.displayName="CardHeader";let c=i.forwardRef((e,s)=>{let{className:r,children:i,...l}=e;return(0,t.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...l,children:i})});c.displayName="CardTitle";let d=i.forwardRef((e,s)=>{let{className:r,children:i,...l}=e;return(0,t.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-gray-500",r),...l,children:i})});d.displayName="CardDescription";let o=i.forwardRef((e,s)=>{let{className:r,children:i,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",r),...l,children:i})});o.displayName="CardContent",i.forwardRef((e,s)=>{let{className:r,children:i,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",r),...l,children:i})}).displayName="CardFooter"},9354:function(e,s,r){"use strict";r.d(s,{cn:function(){return n}});var t=r(4839),i=r(6164);function n(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return(0,i.m6)((0,t.W)(s))}}},function(e){e.O(0,[998,868,971,23,744],function(){return e(e.s=2907)}),_N_E=e.O()}]);